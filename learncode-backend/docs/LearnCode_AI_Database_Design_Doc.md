# ðŸ§  LearnCode AI â€“ Database Design (MongoDB + Mongoose)

## ðŸ“Œ Overview

# ðŸ§  LearnCode AI â€“ Database Design (MongoDB + Mongoose)

This document describes the **database design** for **LearnCode AI**, an AI-powered coding learning platform.

The design follows a **modular NoSQL structure (MongoDB)** using **Mongoose**.  
Each core feature of LearnCode AI (user management, tutorials, AI help, progress tracking, etc.) is represented as a separate collection for scalability, performance, and clear relationships.

---

## ðŸ§© Database Goals

- Support both **students and admins** (role-based access)
- Enable **AI tutoring** and **code execution tracking**
- Provide **progress monitoring**, **feedback**, and **analytics**
- Maintain **secure authentication** (JWT + OTP)
- Ensure extensibility for future modules (e.g., notifications, reports)

---

## ðŸ—ï¸ Collections Overview

| **Collection**                | **Purpose**                                                       | **Key Relationships**                                  |
| ----------------------------- | ----------------------------------------------------------------- | ------------------------------------------------------ |
| **User**                      | Stores all user accounts, authentication info, roles, preferences | â†” Tutorials, Progress, Feedback, CodeSnippets, AIChats |
| **Tutorial**                  | Contains admin/AI-generated tutorials                             | â†” Feedback, Progress, Analytics                        |
| **CodeSnippet**               | Stores saved/shared user code                                     | â†” User                                                 |
| **Progress**                  | Tracks learning completion per tutorial                           | â†” User, Tutorial                                       |
| **Feedback**                  | Stores user ratings and comments                                  | â†” User, Tutorial                                       |
| **AIChat**                    | Logs userâ€“AI tutoring conversations                               | â†” User                                                 |
| **Analytics**                 | Records overall platform metrics                                  | â†” Tutorial, User                                       |
| **AdminLog** _(optional)_     | Tracks admin actions for auditing                                 | â†” User, Tutorial                                       |
| **Notification** _(optional)_ | Stores messages or alerts for users                               | â†” User                                                 |

---

## ðŸ§‘â€ðŸ’» 1. User Schema

Handles authentication, OTPs, preferences, and linked data.

```js
User {
  name: String,
  email: String,
  password: String,
  googleId: String,
  githubId: String,
  isEmailVerified: Boolean,
  role: Enum['user', 'admin'],
  lastLogin: Date,
  profilePicture: String,
  accountStatus: Enum['pending', 'active', 'suspended'],
  preferences: {
    theme: Enum['light', 'dark'],
    fontSize: Enum['small', 'medium', 'large'],
    notifications: Boolean
  },
  emailVerificationOTP: String,
  emailVerificationOTPExpires: Date,
  passwordResetOTP: String,
  passwordResetOTPExpires: Date,
  enrolledTutorials: [TutorialRef],
  savedCodes: [CodeSnippetRef],
  progress: [ProgressRef],
  recentAIChats: [
    { message: String, response: String, timestamp: Date }
  ]
}
```

---

## ðŸ“˜ 2. Tutorial Schema

Contains learning materials created by admins or generated by AI.

```js
Tutorial {
  title: String,
  content: String,
  language: String,
  createdBy: UserRef,
  isAIgenerated: Boolean,
  difficulty: Enum['beginner', 'intermediate', 'advanced'],
  tags: [String],
  averageRating: Number,
  feedbacks: [FeedbackRef],
  pdfLink: String
}
```

---

## ðŸ’¾ 3. CodeSnippet Schema

Stores code files created by users inside the online editor.

```js
CodeSnippet {
  owner: UserRef,
  title: String,
  language: String,
  code: String,
  output: String,
  sharedLink: String,
  isPublic: Boolean
}
```

---

## ðŸ“ˆ 4. Progress Schema

Tracks how much a user has learned in each tutorial.

```js
Progress {
  user: UserRef,
  tutorial: TutorialRef,
  completionPercent: Number,
  lastAccessed: Date,
  timeSpentMinutes: Number
}
```

---

## â­ 5. Feedback Schema

Allows users to rate and comment on tutorials.

```js
Feedback {
  user: UserRef,
  tutorial: TutorialRef,
  rating: Number,
  comment: String
}
```

---

## ðŸ¤– 6. AIChat Schema

Logs chat sessions between users and the AI tutor.

```js
AIChat {
  user: UserRef,
  messages: [
    {
      sender: Enum['user', 'ai'],
      text: String,
      timestamp: Date
    }
  ]
}
```

---

## ðŸ“Š 7. Analytics Schema

Stores aggregated platform usage data for the admin dashboard.

```js
Analytics {
  date: Date,
  activeUsers: Number,
  newSignups: Number,
  totalTutorials: Number,
  feedbackCount: Number,
  mostViewedTutorials: [TutorialRef]
}
```

---

## ðŸ§¾ 8. AdminLog Schema _(Optional but Recommended)_

Tracks actions taken by admins, useful for auditing and moderation.

```js
AdminLog {
  admin: UserRef,
  action: String,
  target: String, // e.g., 'User', 'Tutorial'
  targetId: ObjectId,
  details: String,
  timestamp: Date
}
```

---

## ðŸ”” 9. Notification Schema _(Optional)_

Stores system messages and alerts for users.

```js
Notification {
  user: UserRef,
  message: String,
  type: Enum['info', 'success', 'warning', 'error'],
  isRead: Boolean
}
```

---

## ðŸ”— Relationships Summary

- **User â†’ Tutorial**: Admins create tutorials; users enroll in them.
- **User â†’ CodeSnippet**: Users save and share code.
- **User â†’ Progress**: Tracks learning activity.
- **User â†’ AIChat**: Stores chat sessions with the AI tutor.
- **User â†’ Feedback â†’ Tutorial**: Connects feedback between user and tutorial.
- **Admin â†’ Analytics**: Admin dashboard metrics.
- **Admin â†’ AdminLog**: Records admin activity logs.

---

## âš™ï¸ Technology Stack

- **Database:** MongoDB (NoSQL)
- **ODM:** Mongoose
- **Backend Framework:** Node.js + Express
- **Hosting (Recommended):** MongoDB Atlas

---

## âœ… Design Highlights

- Clean separation of modules (tutorials, feedback, code, AI)
- Scalable and flexible document structure
- Secure OTP & authentication support
- Role-based access control (user/admin)
- Extensible for future features like reporting and notifications

---

## ðŸ§­ Next Step After Database Design

Once your database is ready:

1. Implement **Express backend** with routes and controllers.
2. Add **JWT authentication** and middlewares.
3. Connect **frontend (React/Vite)** to APIs.
4. Build **AI Tutor integration** and **real-time compiler**.
5. Deploy to **MongoDB Atlas + Render/Vercel**.

---

> ðŸ§© _This database design satisfies all 17 functional requirements described in the LearnCode AI SRS._
> ðŸ’¾ Author: _Muhammad Asad Ullah Turab (221844)_  
> Supervisors: _Mr. Sharif Hussain_  
> Team: _Israr Ahmad â€¢ Muhammad Saad_
